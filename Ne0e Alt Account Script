-- Ne0e Alt Account Control (Chatte .prefix, oto isim bulma, komut kutusu, bildirim)

local config = {
    mainAccount = "Xper1tiz", -- Main hesabının kullanıcı adı
    altAccount = "semih53sn2", -- Alt hesabının kullanıcı adı
    commands = {
        ".goto <kullanıcı>", ".follow <kullanıcı>", ".stop",
        -- Buraya yeni komutlar ekleyebilirsiniz
    }
}

local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")
local StarterGui = game:GetService("StarterGui")

local isMain = (lp.Name == config.mainAccount)
local isAlt = (lp.Name == config.altAccount)

-- Bildirim
pcall(function()
    StarterGui:SetCore("SendNotification", {
        Title = "Ne0e Alt Control",
        Text = "Script başarıyla başlatıldı!",
        Duration = 5
    })
end)

-- Kısmi isimle oyuncu bulma
local function findPlayerByPartialName(partial)
    partial = partial:lower()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr.Name:lower():sub(1, #partial) == partial then
            return plr
        end
    end
    return nil
end

-- ALT HESAPTA SİYAH EKRAN VE YAZI
if isAlt then
    local gui = Instance.new("ScreenGui")
    gui.Name = "Ne0eAltAccountScreen"
    gui.Parent = lp:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    local bg = Instance.new("Frame", gui)
    bg.Size = UDim2.new(1,0,1,0)
    bg.Position = UDim2.new(0,0,0,0)
    bg.BackgroundColor3 = Color3.new(0,0,0)

    local label = Instance.new("TextLabel", bg)
    label.Size = UDim2.new(1,0,1,0)
    label.Position = UDim2.new(0,0,0,0)
    label.BackgroundTransparency = 1
    label.Text = "Ne0e Alt Account Script Working"
    label.TextColor3 = Color3.fromRGB(80, 255, 180)
    label.Font = Enum.Font.GothamBlack
    label.TextScaled = true
end

-- KOMUT KUTUSU (SADECE MAIN HESAPTA, scrollable)
if isMain then
    local gui = Instance.new("ScreenGui")
    gui.Name = "Ne0eAltAccountCmdBox"
    gui.Parent = lp:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    local main = Instance.new("Frame", gui)
    main.Size = UDim2.new(0, 320, 0, 260)
    main.Position = UDim2.new(0, 40, 0, 120)
    main.BackgroundColor3 = Color3.fromRGB(32, 34, 44)
    main.BorderSizePixel = 0
    main.Active = true
    main.Draggable = true
    local mainCorner = Instance.new("UICorner", main)
    mainCorner.CornerRadius = UDim.new(0, 12)

    local title = Instance.new("TextLabel", main)
    title.Size = UDim2.new(1, 0, 0, 32)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
    title.Text = "Ne0e Alt Account Komut Kutusu"
    title.TextColor3 = Color3.fromRGB(80, 180, 255)
    title.Font = Enum.Font.GothamBlack
    title.TextScaled = true
    title.BorderSizePixel = 0
    local titleCorner = Instance.new("UICorner", title)
    titleCorner.CornerRadius = UDim.new(0, 12)

    -- Scrollable komut listesi
    local scroll = Instance.new("ScrollingFrame", main)
    scroll.Size = UDim2.new(1, -24, 0, 150)
    scroll.Position = UDim2.new(0, 12, 0, 40)
    scroll.BackgroundColor3 = Color3.fromRGB(44, 48, 70)
    scroll.BorderSizePixel = 0
    scroll.CanvasSize = UDim2.new(0, 0, 0, #config.commands * 32)
    scroll.ScrollBarThickness = 8
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar

    local scrollCorner = Instance.new("UICorner", scroll)
    scrollCorner.CornerRadius = UDim.new(0, 8)

    local layout = Instance.new("UIListLayout", scroll)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Padding = UDim.new(0, 4)

    for _, v in ipairs(config.commands) do
        local cmdLabel = Instance.new("TextLabel", scroll)
        cmdLabel.Size = UDim2.new(1, -8, 0, 28)
        cmdLabel.BackgroundTransparency = 1
        cmdLabel.TextColor3 = Color3.fromRGB(180, 220, 255)
        cmdLabel.Font = Enum.Font.Gotham
        cmdLabel.TextSize = 16
        cmdLabel.Text = v
        cmdLabel.TextXAlignment = Enum.TextXAlignment.Left
    end

    local cmdBox = Instance.new("TextBox", main)
    cmdBox.Size = UDim2.new(1, -24, 0, 32)
    cmdBox.Position = UDim2.new(0, 12, 0, 200)
    cmdBox.BackgroundColor3 = Color3.fromRGB(80, 180, 255)
    cmdBox.Text = ""
    cmdBox.PlaceholderText = "Komut gir (örn: .goto KullaniciAdi)"
    cmdBox.TextColor3 = Color3.fromRGB(30,30,40)
    cmdBox.Font = Enum.Font.GothamBold
    cmdBox.TextScaled = true
    cmdBox.BorderSizePixel = 0
    local cmdBoxCorner = Instance.new("UICorner", cmdBox)
    cmdBoxCorner.CornerRadius = UDim.new(0, 8)

    cmdBox.FocusLost:Connect(function(enter)
        if not enter then return end
        local msg = cmdBox.Text
        cmdBox.Text = ""
        if msg == "" then return end
        -- Komutu chat'e yaz (prefixli)
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local chatEvent = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
        if chatEvent then
            chatEvent:FindFirstChild("SayMessageRequest"):FireServer(msg, "All")
        end
    end)
end

-- ALT HESAP KOMUT DİNLEME (.prefix ve oto isim)
if isAlt then
    local function handleCommand(cmd, arg)
        local char = lp.Character or lp.CharacterAdded:Wait()
        local hum = char:FindFirstChildOfClass("Humanoid")
        if not hum then return end

        local target = nil
        if arg and arg ~= "" then
            target = findPlayerByPartialName(arg)
        end

        if cmd == "goto" and target then
            if target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                char:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(0,2,0))
            end
        end

        if cmd == "follow" and target then
            if target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                if not _G._ne0e_following then
                    _G._ne0e_following = true
                    spawn(function()
                        while _G._ne0e_following and target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") do
                            local myHRP = lp.Character.HumanoidRootPart
                            local targetHRP = target.Character.HumanoidRootPart
                            local dist = (myHRP.Position - targetHRP.Position).Magnitude
                            if dist > 3 then
                                hum:MoveTo(targetHRP.Position + targetHRP.CFrame.LookVector * -2)
                            end
                            wait(0.2)
                        end
                    end)
                end
            end
        end

        if cmd == "stop" then
            _G._ne0e_following = false
        end
    end

    -- Yeni chat sistemi
    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        TextChatService.MessageReceived:Connect(function(msg)
            if msg.TextSource and msg.TextSource.Name == config.mainAccount then
                local text = msg.Text
                local cmd, arg = text:match("^%.(%w+)%s*(.*)") -- .prefix ile
                if cmd then
                    handleCommand(cmd:lower(), arg)
                end
            end
        end)
    else
        -- Eski chat sistemi
        for _, player in ipairs(Players:GetPlayers()) do
            player.Chatted:Connect(function(message)
                if player.Name == config.mainAccount then
                    local cmd, arg = message:match("^%.(%w+)%s*(.*)") -- .prefix ile
                    if cmd then
                        handleCommand(cmd:lower(), arg)
                    end
                end
            end)
        end
        Players.PlayerAdded:Connect(function(player)
            player.Chatted:Connect(function(message)
                if player.Name == config.mainAccount then
                    local cmd, arg = message:match("^%.(%w+)%s*(.*)") -- .prefix ile
                    if cmd then
                        handleCommand(cmd:lower(), arg)
                    end
                end
            end)
        end)
    end
end
