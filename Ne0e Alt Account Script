-- Ne0e Alt Account Control (mirror, spinorbit, bodyguard, gelişmiş dans paneli, animasyon scroll up/down)

local config = {
    mainAccount = "Xper1tiz",
    altAccount = "semih53sn2",
    commands = {
        ".goto <kullanıcı>",
        ".follow <kullanıcı>",
        ".stop",
        ".spin",
        ".unspin",
        ".orbit <kullanıcı>",
        ".unorbit",
        ".spinorbit <kullanıcı>",
        ".fling <kullanıcı>",
        ".lag",
        ".unlag",
        ".re",
        ".chat <mesaj>",
        ".bang <kullanıcı>",
        ".unbang",
        ".headsit <kullanıcı>",
        ".unheadsit",
        ".mirror <kullanıcı>",
        ".bodyguard <kullanıcı>",
        ".quit"
        -- DANCE KOMUTLARI SADECE PANELDE!
    },
    dancePanelCommands = {
        {name = ".namelessanimation", anim = ""},
        {name = ".dance1", anim = "rbxassetid://33796059"},
        {name = ".dance2", anim = "rbxassetid://248263260"},
        {name = ".dance3", anim = "rbxassetid://28488254"},
        {name = ".headthrow", anim = "rbxassetid://35154961"},
        {name = ".infiniterunnerrun", anim = "rbxassetid://252557606"},
    }
}

for _, v in ipairs(config.dancePanelCommands) do
    if cmd == v.name:sub(2) then
        if v.name == ".namelessanimation" then
            -- Nameless Animation Scripti çalıştır
            loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-FE-Nameless-Animations-V4-4249"))()
        else
            playAnim(v.anim)
        end
    end
end

local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local isMain = (lp.Name == config.mainAccount)
local isAlt = (lp.Name == config.altAccount)

pcall(function()
    StarterGui:SetCore("SendNotification", {
        Title = "Ne0e Alt Control",
        Text = "Script başarıyla başlatıldı!",
        Duration = 5
    })
end)

local function findPlayerByPartialName(partial)
    partial = partial:lower()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr.Name:lower():sub(1, #partial) == partial then
            return plr
        end
    end
    return nil
end

if isAlt then
    local gui = Instance.new("ScreenGui")
    gui.Name = "Ne0eAltAccountScreen"
    gui.Parent = lp:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    local bg = Instance.new("Frame", gui)
    bg.Size = UDim2.new(1,0,1,0)
    bg.Position = UDim2.new(0,0,0,0)
    bg.BackgroundColor3 = Color3.new(0,0,0)

    local label = Instance.new("TextLabel", bg)
    label.Size = UDim2.new(1,0,1,0)
    label.Position = UDim2.new(0,0,0,0)
    label.BackgroundTransparency = 1
    label.Text = "Ne0e Alt Account Script Working"
    label.TextColor3 = Color3.fromRGB(80, 255, 180)
    label.Font = Enum.Font.GothamBlack
    label.TextScaled = true
end

if isMain then
    local gui = Instance.new("ScreenGui")
    gui.Name = "Ne0eAltAccountCmdList"
    gui.Parent = lp:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    local main = Instance.new("Frame", gui)
    main.Size = UDim2.new(0, 360, 0, 420)
    main.Position = UDim2.new(0, 40, 0, 120)
    main.BackgroundColor3 = Color3.fromRGB(32, 34, 44)
    main.BorderSizePixel = 0
    main.Active = true
    main.Draggable = true
    local mainCorner = Instance.new("UICorner", main)
    mainCorner.CornerRadius = UDim.new(0, 12)

    local title = Instance.new("TextLabel", main)
    title.Size = UDim2.new(1, 0, 0, 32)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
    title.Text = "Ne0e Alt Account Panel"
    title.TextColor3 = Color3.fromRGB(80, 180, 255)
    title.Font = Enum.Font.GothamBlack
    title.TextScaled = true
    title.BorderSizePixel = 0
    local titleCorner = Instance.new("UICorner", title)
    titleCorner.CornerRadius = UDim.new(0, 12)

    -- TAB BAR (sadece 2 tab)
    local tabBar = Instance.new("Frame", main)
    tabBar.Size = UDim2.new(1, -24, 0, 36)
    tabBar.Position = UDim2.new(0, 12, 0, 40)
    tabBar.BackgroundTransparency = 1

    local tabNames = {"Commands", "Animations"}
    local tabs = {}
    local selectedTab = 1

    for i, tabName in ipairs(tabNames) do
        local tabBtn = Instance.new("TextButton", tabBar)
        tabBtn.Size = UDim2.new(0, 140, 1, 0)
        tabBtn.Position = UDim2.new(0, (i-1)*150, 0, 0)
        tabBtn.BackgroundColor3 = i == selectedTab and Color3.fromRGB(80,180,255) or Color3.fromRGB(44,48,70)
        tabBtn.Text = tabName
        tabBtn.TextColor3 = Color3.fromRGB(30,30,40)
        tabBtn.Font = Enum.Font.GothamBold
        tabBtn.TextScaled = true
        tabBtn.BorderSizePixel = 0
        local tabBtnCorner = Instance.new("UICorner", tabBtn)
        tabBtnCorner.CornerRadius = UDim.new(0, 8)
        tabs[i] = tabBtn
    end

    -- PANELLER
    local panels = {}

    -- Commands Panel
    local cmdPanel = Instance.new("Frame", main)
    cmdPanel.Size = UDim2.new(1, -24, 1, -92)
    cmdPanel.Position = UDim2.new(0, 12, 0, 80)
    cmdPanel.BackgroundColor3 = Color3.fromRGB(44, 48, 70)
    cmdPanel.BorderSizePixel = 0
    local cmdPanelCorner = Instance.new("UICorner", cmdPanel)
    cmdPanelCorner.CornerRadius = UDim.new(0, 8)

    local cmdScroll = Instance.new("ScrollingFrame", cmdPanel)
    cmdScroll.Size = UDim2.new(1, -40, 1, -8)
    cmdScroll.Position = UDim2.new(0, 0, 0, 0)
    cmdScroll.BackgroundTransparency = 1
    cmdScroll.CanvasSize = UDim2.new(0, 0, 0, #config.commands * 32)
    cmdScroll.ScrollBarThickness = 8
    cmdScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    cmdScroll.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
    local cmdLayout = Instance.new("UIListLayout", cmdScroll)
    cmdLayout.SortOrder = Enum.SortOrder.LayoutOrder
    cmdLayout.Padding = UDim.new(0, 4)
    for _, v in ipairs(config.commands) do
        local cmdLabel = Instance.new("TextLabel", cmdScroll)
        cmdLabel.Size = UDim2.new(1, -8, 0, 28)
        cmdLabel.BackgroundTransparency = 1
        cmdLabel.TextColor3 = Color3.fromRGB(180, 220, 255)
        cmdLabel.Font = Enum.Font.Gotham
        cmdLabel.TextSize = 16
        cmdLabel.Text = v
        cmdLabel.TextXAlignment = Enum.TextXAlignment.Left
    end
    -- Scroll Up/Down Butonları (Commands)
    local cmdScrollUp = Instance.new("TextButton", cmdPanel)
    cmdScrollUp.Size = UDim2.new(0, 32, 0, 24)
    cmdScrollUp.Position = UDim2.new(1, -36, 0, 8)
    cmdScrollUp.BackgroundColor3 = Color3.fromRGB(80, 180, 255)
    cmdScrollUp.Text = "▲"
    cmdScrollUp.TextColor3 = Color3.fromRGB(30,30,40)
    cmdScrollUp.Font = Enum.Font.GothamBold
    cmdScrollUp.TextScaled = true
    local cmdScrollUpCorner = Instance.new("UICorner", cmdScrollUp)
    cmdScrollUpCorner.CornerRadius = UDim.new(0, 8)

    local cmdScrollDown = Instance.new("TextButton", cmdPanel)
    cmdScrollDown.Size = UDim2.new(0, 32, 0, 24)
    cmdScrollDown.Position = UDim2.new(1, -36, 1, -32)
    cmdScrollDown.BackgroundColor3 = Color3.fromRGB(80, 180, 255)
    cmdScrollDown.Text = "▼"
    cmdScrollDown.TextColor3 = Color3.fromRGB(30,30,40)
    cmdScrollDown.Font = Enum.Font.GothamBold
    cmdScrollDown.TextScaled = true
    local cmdScrollDownCorner = Instance.new("UICorner", cmdScrollDown)
    cmdScrollDownCorner.CornerRadius = UDim.new(0, 8)

    cmdScrollUp.MouseButton1Click:Connect(function()
        cmdScroll.CanvasPosition = Vector2.new(0, math.max(cmdScroll.CanvasPosition.Y - 32, 0))
    end)
    cmdScrollDown.MouseButton1Click:Connect(function()
        cmdScroll.CanvasPosition = Vector2.new(0, math.min(cmdScroll.CanvasPosition.Y + 32, cmdScroll.AbsoluteCanvasSize.Y - cmdScroll.AbsoluteWindowSize.Y))
    end)
    panels[1] = cmdPanel

    -- Dances Panel
    local dancePanel = Instance.new("Frame", main)
    dancePanel.Size = UDim2.new(1, -24, 1, -92)
    dancePanel.Position = UDim2.new(0, 12, 0, 80)
    dancePanel.BackgroundColor3 = Color3.fromRGB(44, 48, 70)
    dancePanel.BorderSizePixel = 0
    local dancePanelCorner = Instance.new("UICorner", dancePanel)
    dancePanelCorner.CornerRadius = UDim.new(0, 8)

    local danceScroll = Instance.new("ScrollingFrame", dancePanel)
    danceScroll.Size = UDim2.new(1, -40, 1, -8)
    danceScroll.Position = UDim2.new(0, 0, 0, 0)
    danceScroll.BackgroundTransparency = 1
    danceScroll.CanvasSize = UDim2.new(0, 0, 0, #config.dancePanelCommands * 32)
    danceScroll.ScrollBarThickness = 8
    danceScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    danceScroll.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
    local danceLayout = Instance.new("UIListLayout", danceScroll)
    danceLayout.SortOrder = Enum.SortOrder.LayoutOrder
    danceLayout.Padding = UDim.new(0, 4)
    for _, v in ipairs(config.dancePanelCommands) do
        local danceLabel = Instance.new("TextLabel", danceScroll)
        danceLabel.Size = UDim2.new(1, -8, 0, 28)
        danceLabel.BackgroundTransparency = 1
        danceLabel.TextColor3 = Color3.fromRGB(180, 255, 180)
        danceLabel.Font = Enum.Font.Gotham
        danceLabel.TextSize = 16
        danceLabel.Text = v.name
        danceLabel.TextXAlignment = Enum.TextXAlignment.Left
    end
    -- Scroll Up/Down Butonları (Dances)
    local danceScrollUp = Instance.new("TextButton", dancePanel)
    danceScrollUp.Size = UDim2.new(0, 32, 0, 24)
    danceScrollUp.Position = UDim2.new(1, -36, 0, 8)
    danceScrollUp.BackgroundColor3 = Color3.fromRGB(80, 180, 255)
    danceScrollUp.Text = "▲"
    danceScrollUp.TextColor3 = Color3.fromRGB(30,30,40)
    danceScrollUp.Font = Enum.Font.GothamBold
    danceScrollUp.TextScaled = true
    local danceScrollUpCorner = Instance.new("UICorner", danceScrollUp)
    danceScrollUpCorner.CornerRadius = UDim.new(0, 8)

    local danceScrollDown = Instance.new("TextButton", dancePanel)
    danceScrollDown.Size = UDim2.new(0, 32, 0, 24)
    danceScrollDown.Position = UDim2.new(1, -36, 1, -32)
    danceScrollDown.BackgroundColor3 = Color3.fromRGB(80, 180, 255)
    danceScrollDown.Text = "▼"
    danceScrollDown.TextColor3 = Color3.fromRGB(30,30,40)
    danceScrollDown.Font = Enum.Font.GothamBold
    danceScrollDown.TextScaled = true
    local danceScrollDownCorner = Instance.new("UICorner", danceScrollDown)
    danceScrollDownCorner.CornerRadius = UDim.new(0, 8)

    danceScrollUp.MouseButton1Click:Connect(function()
        danceScroll.CanvasPosition = Vector2.new(0, math.max(danceScroll.CanvasPosition.Y - 32, 0))
    end)
    danceScrollDown.MouseButton1Click:Connect(function()
        danceScroll.CanvasPosition = Vector2.new(0, math.min(danceScroll.CanvasPosition.Y + 32, danceScroll.AbsoluteCanvasSize.Y - danceScroll.AbsoluteWindowSize.Y))
    end)
    panels[2] = dancePanel

    -- Tab geçiş fonksiyonu
    local function showTab(idx)
        for i, panel in ipairs(panels) do
            panel.Visible = (i == idx)
            tabs[i].BackgroundColor3 = i == idx and Color3.fromRGB(80,180,255) or Color3.fromRGB(44,48,70)
        end
    end
    showTab(selectedTab)

    for i, tabBtn in ipairs(tabs) do
        tabBtn.MouseButton1Click:Connect(function()
            selectedTab = i
            showTab(i)
        end)
    end
end

if isAlt then
    local spinObj, orbitConn, lagConn
    local isSpinning = false
    local isOrbiting = false
    local isLagging = false

    local bangActive = false
    local bangConn = nil
    local bangAnimTrack = nil

    local headsitActive = false
    local headsitConn = nil

    local animTrack = nil

    local mirrorConn = nil
    local mirrorActive = false

    local spinorbitConn = nil
    local spinorbitActive = false

    local bodyguardConn = nil
    local bodyguardActive = false

    local function stopBang()
        bangActive = false
        if bangConn then bangConn:Disconnect() end
        bangConn = nil
        if bangAnimTrack then bangAnimTrack:Stop() end
        bangAnimTrack = nil
    end

    local function bangPlayer(targetPlr)
        local char = lp.Character
        local targetChar = targetPlr and targetPlr.Character
        if not char or not targetChar then return end

        local root = char:FindFirstChild("HumanoidRootPart")
        local targetRoot = targetChar:FindFirstChild("HumanoidRootPart")
        if not root or not targetRoot then return end

        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if not humanoid then return end

        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://148840371"
        bangAnimTrack = humanoid:LoadAnimation(anim)
        bangAnimTrack.Looped = true
        bangAnimTrack:Play()
        game:GetService("Debris"):AddItem(anim, 2)

        bangActive = true
        bangConn = RunService.RenderStepped:Connect(function()
            if not bangActive or not root or not targetRoot then return end
            local behind = targetRoot.CFrame.Position - (targetRoot.CFrame.LookVector * 0.5)
            local newCFrame = CFrame.new(behind, targetRoot.Position)
            root.CFrame = root.CFrame:Lerp(newCFrame, 0.9)
            if bangAnimTrack and not bangAnimTrack.IsPlaying then
                bangAnimTrack:Play()
            end
        end)
    end

    local function stopHeadsit()
        headsitActive = false
        if headsitConn then headsitConn:Disconnect() end
        headsitConn = nil
    end

    local function headsitPlayer(targetPlr)
        stopHeadsit()
        local char = lp.Character
        local targetChar = targetPlr and targetPlr.Character
        if not char or not targetChar then return end

        local root = char:FindFirstChild("HumanoidRootPart")
        local targetHead = targetChar:FindFirstChild("Head")
        if not root or not targetHead then return end

        headsitActive = true
        headsitConn = RunService.Heartbeat:Connect(function()
            if not headsitActive or not root or not targetHead then return end
            local above = targetHead.Position + Vector3.new(0, 1.1, 0)
            root.CFrame = CFrame.new(above, targetHead.Position + Vector3.new(0, 2, 0))
            root.Velocity = Vector3.new(0,0,0)
            root.RotVelocity = Vector3.new(0,0,0)
        end)
    end

    local function playAnim(animId)
        local char = lp.Character
        if not char then return end
        local hum = char:FindFirstChildOfClass("Humanoid")
        if not hum then return end
        if animTrack then pcall(function() animTrack:Stop() end) end
        local anim = Instance.new("Animation")
        anim.AnimationId = animId
        animTrack = hum:LoadAnimation(anim)
        animTrack.Looped = true
        animTrack:Play()
        game:GetService("Debris"):AddItem(anim, 2)
    end

    local function stopAnim()
        if animTrack then pcall(function() animTrack:Stop() end) end
        animTrack = nil
    end

    local function stopMirror()
        mirrorActive = false
        if mirrorConn then mirrorConn:Disconnect() end
        mirrorConn = nil
    end

    local function mirrorPlayer(targetPlr)
        stopMirror()
        local char = lp.Character
        local targetChar = targetPlr and targetPlr.Character
        if not char or not targetChar then return end
        local root = char:FindFirstChild("HumanoidRootPart")
        local targetRoot = targetChar:FindFirstChild("HumanoidRootPart")
        local hum = char:FindFirstChildOfClass("Humanoid")
        local targetHum = targetChar:FindFirstChildOfClass("Humanoid")
        if not root or not targetRoot or not hum or not targetHum then return end

        mirrorActive = true
        mirrorConn = RunService.RenderStepped:Connect(function()
            if not mirrorActive or not root or not targetRoot then return end
            root.CFrame = targetRoot.CFrame
            hum.MoveDirection = targetHum.MoveDirection
            hum.Jump = targetHum.Jump
            -- Animasyonlar için eklenebilir
        end)
    end

    local function stopSpinOrbit()
        spinorbitActive = false
        if spinorbitConn then spinorbitConn:Disconnect() end
        spinorbitConn = nil
    end

    local function spinOrbitPlayer(targetPlr)
        stopSpinOrbit()
        local char = lp.Character
        local targetChar = targetPlr and targetPlr.Character
        if not char or not targetChar then return end
        local root = char:FindFirstChild("HumanoidRootPart")
        local targetRoot = targetChar:FindFirstChild("HumanoidRootPart")
        if not root or not targetRoot then return end

        local angle = 0
        local radius = 6
        local speed = 4
        spinorbitActive = true
        spinorbitConn = RunService.Heartbeat:Connect(function(dt)
            if not spinorbitActive or not root or not targetRoot then return end
            angle = angle + dt * speed
            local offset = Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
            root.CFrame = CFrame.new(targetRoot.Position + offset, targetRoot.Position) * CFrame.Angles(0, math.rad(720 * dt), 0)
        end)
    end

    local function stopBodyguard()
        bodyguardActive = false
        if bodyguardConn then bodyguardConn:Disconnect() end
        bodyguardConn = nil
    end

    local function bodyguardPlayer(targetPlr)
        stopBodyguard()
        local char = lp.Character
        local targetChar = targetPlr and targetPlr.Character
        if not char or not targetChar then return end
        local root = char:FindFirstChild("HumanoidRootPart")
        local targetRoot = targetChar:FindFirstChild("HumanoidRootPart")
        if not root or not targetRoot then return end

        local angle = 0
        local radius = 3
        local speed = 6
        bodyguardActive = true
        bodyguardConn = RunService.Heartbeat:Connect(function(dt)
            if not bodyguardActive or not root or not targetRoot then return end
            angle = angle + dt * speed
            local offset = Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
            root.CFrame = CFrame.new(targetRoot.Position + offset, targetRoot.Position)
        end)
    end

    local function handleCommand(cmd, arg)
        local char = lp.Character or lp.CharacterAdded:Wait()
        local hum = char:FindFirstChildOfClass("Humanoid")
        if not hum then return end

        local target = nil
        if arg and arg ~= "" then
            target = findPlayerByPartialName(arg)
        end

        if cmd == "goto" and target then
            if target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                char:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(0,2,0))
            end
        end

        if cmd == "follow" and target then
            if target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                if not _G._ne0e_following then
                    _G._ne0e_following = true
                    spawn(function()
                        while _G._ne0e_following and target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") do
                            local myHRP = lp.Character.HumanoidRootPart
                            local targetHRP = target.Character.HumanoidRootPart
                            local dist = (myHRP.Position - targetHRP.Position).Magnitude
                            if dist > 3 then
                                hum:MoveTo(targetHRP.Position + targetHRP.CFrame.LookVector * -2)
                            end
                            wait(0.2)
                        end
                    end)
                end
            end
        end

        if cmd == "stop" then
            _G._ne0e_following = false
            stopAnim()
            stopMirror()
            stopSpinOrbit()
            stopBodyguard()
        end

        if cmd == "spin" then
            if not isSpinning and char:FindFirstChild("HumanoidRootPart") then
                isSpinning = true
                spinObj = Instance.new("BodyAngularVelocity")
                spinObj.Name = "Ne0eSpin"
                spinObj.Parent = char.HumanoidRootPart
                spinObj.MaxTorque = Vector3.new(0, math.huge, 0)
                spinObj.AngularVelocity = Vector3.new(0, 10, 0)
            end
        end

        if cmd == "unspin" then
            isSpinning = false
            if spinObj and spinObj.Parent then
                spinObj:Destroy()
            end
        end

        if cmd == "orbit" and target then
            if not isOrbiting and char:FindFirstChild("HumanoidRootPart") then
                isOrbiting = true
                local radius = 6
                local speed = 2
                local angle = 0
                orbitConn = RunService.Heartbeat:Connect(function(dt)
                    if not isOrbiting or not target.Character or not target.Character:FindFirstChild("HumanoidRootPart") then return end
                    angle = angle + dt * speed
                    local offset = Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
                    char.HumanoidRootPart.CFrame = CFrame.new(target.Character.HumanoidRootPart.Position + offset, target.Character.HumanoidRootPart.Position)
                end)
            end
        end

        if cmd == "unorbit" then
            isOrbiting = false
            if orbitConn then
                orbitConn:Disconnect()
                orbitConn = nil
            end
        end

        if cmd == "fling" and target then
            local char = lp.Character or lp.CharacterAdded:Wait()
            local hrp = char:FindFirstChild("HumanoidRootPart")
            for _, v in pairs(char:GetChildren()) do
                if v:IsA("BasePart") then
                    v.Massless = true
                end
            end

            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local targetHRP = target.Character.HumanoidRootPart
                local bav = Instance.new("BodyAngularVelocity", targetHRP)
                bav.Name = "Ne0eTargetFlingBAV"
                bav.AngularVelocity = Vector3.new(0, 1E5, 0)
                bav.MaxTorque = Vector3.new(0, math.huge, 0)
                bav.P = math.huge

                local t = tick()
                while tick() - t < 1.2 and target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") do
                    hrp.CFrame = target.Character.HumanoidRootPart.CFrame
                    bav.AngularVelocity = Vector3.new(0, 1E5, 0)
                    RunService.Heartbeat:Wait()
                end

                bav:Destroy()
            end
        end

        if cmd == "lag" then
            if not isLagging then
                isLagging = true
                lagConn = RunService.Heartbeat:Connect(function()
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        char.HumanoidRootPart.CFrame = char.HumanoidRootPart.CFrame * CFrame.new(math.random(-2,2), math.random(-2,2), math.random(-2,2))
                    end
                end)
            end
        end

        if cmd == "unlag" then
            isLagging = false
            if lagConn then
                lagConn:Disconnect()
                lagConn = nil
            end
        end

        if cmd == "re" then
            if hum then
                hum.Health = 0
            end
        end

        if cmd == "chat" and arg and arg ~= "" then
            if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
                local channel = TextChatService.TextChannels and TextChatService.TextChannels.RBXGeneral
                if channel then
                    channel:SendAsync(arg)
                end
            else
                local chatEvent = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
                if chatEvent then
                    local say = chatEvent:FindFirstChild("SayMessageRequest")
                    if say then
                        say:FireServer(arg, "All")
                    end
                end
            end
        end

        if cmd == "bang" and target then
            stopBang()
            bangPlayer(target)
        end

        if cmd == "unbang" then
            stopBang()
        end

        if cmd == "headsit" and target then
            headsitPlayer(target)
        end

        if cmd == "unheadsit" then
            stopHeadsit()
        end

        -- DANCE KOMUTLARI (sadece panelde gösterilir)
        for _, v in ipairs(config.dancePanelCommands) do
            if cmd == v.name:sub(2) then
                playAnim(v.anim)
            end
        end

        -- .mirror <kullanıcı>
        if cmd == "mirror" and target then
            mirrorPlayer(target)
        end

        -- .spinorbit <kullanıcı>
        if cmd == "spinorbit" and target then
            spinOrbitPlayer(target)
        end

        -- .bodyguard <kullanıcı>
        if cmd == "bodyguard" and target then
            bodyguardPlayer(target)
        end

        -- .quit
        if cmd == "quit" then
            if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
                local channel = TextChatService.TextChannels and TextChatService.TextChannels.RBXGeneral
                if channel then
                    channel:SendAsync("Quitting...")
                end
            else
                local chatEvent = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
                if chatEvent then
                    local say = chatEvent:FindFirstChild("SayMessageRequest")
                    if say then
                        say:FireServer("Quitting...", "All")
                    end
                end
            end
            wait(0.5)
            lp:Kick("Quitting...")
        end
    end

    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        TextChatService.MessageReceived:Connect(function(msg)
            if msg.TextSource and msg.TextSource.Name == config.mainAccount then
                local text = msg.Text
                local cmd, arg = text:match("^%.(%w+)%s*(.*)")
                if cmd then
                    handleCommand(cmd:lower(), arg)
                end
            end
        end)
    else
        for _, player in ipairs(Players:GetPlayers()) do
            player.Chatted:Connect(function(message)
                if player.Name == config.mainAccount then
                    local cmd, arg = message:match("^%.(%w+)%s*(.*)")
                    if cmd then
                        handleCommand(cmd:lower(), arg)
                    end
                end
            end)
        end
        Players.PlayerAdded:Connect(function(player)
            player.Chatted:Connect(function(message)
                if player.Name == config.mainAccount then
                    local cmd, arg = message:match("^%.(%w+)%s*(.*)")
                    if cmd then
                        handleCommand(cmd:lower(), arg)
                    end
                end
            end)
        end)
    end
end
